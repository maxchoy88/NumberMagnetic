<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ•°ç£ç©ºé—´ | ä¸‰ä½ä¸€ä½“èƒ½é‡åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --gold: #d4af37; --dark: #0f172a; --glass: rgba(255, 255, 255, 0.95);
            --ji: #10b981; --xiong: #ef4444;
        }
        body { font-family: -apple-system, sans-serif; background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%); margin: 0; padding: 20px; color: #1e293b; min-height: 100vh; }
        .container { max-width: 600px; margin: 0 auto; }
        
        .header { text-align: center; color: white; margin-bottom: 30px; }
        .header h1 { margin: 0; font-size: 26px; letter-spacing: 2px; color: var(--gold); }

        .card { background: var(--glass); border-radius: 20px; padding: 20px; margin-bottom: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .label { font-size: 14px; font-weight: bold; color: #64748b; margin-bottom: 8px; display: block; }
        
        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        input { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; box-sizing: border-box; font-size: 15px; }
        .full-btn { width: 100%; padding: 15px; background: var(--gold); color: #000; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 10px; }

        /* ç»“æœæ ·å¼ */
        .result-section { display: none; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .report-box { border-left: 4px solid var(--gold); padding-left: 15px; margin: 15px 0; }
        .star-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f1f5f9; }
        .type-tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; color: white; margin-left: 5px; }
        
        .score-circle { width: 80px; height: 80px; border-radius: 50%; border: 5px solid var(--gold); display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 0 auto 15px; }
        .score-num { font-size: 24px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>âœ¨ æ•°ç£ç©ºé—´ Pro</h1>
        <p>å…ˆå¤©å‘½æ ¼ Â· åå¤©ç£åœº Â· ç»¼åˆè¿åŠ¿</p>
    </div>

    <div class="card">
        <label class="label">ğŸ—“ï¸ å…ˆå¤©ï¼šå‡ºç”Ÿæ—¥æœŸ (ä¾‹: 19800930)</label>
        <input type="tel" id="birthInput" placeholder="è¯·è¾“å…¥8ä½ç”Ÿæ—¥" maxlength="8">
        
        <div class="input-row" style="margin-top:15px;">
            <div>
                <label class="label">ğŸ“± åå¤©ï¼šæ‰‹æœºå·ç </label>
                <input type="tel" id="phoneInput" placeholder="ä¸»è¦æ‰‹æœºå·">
            </div>
            <div>
                <label class="label">ğŸš— è½½ä½“ï¼šè½¦ç‰Œå·ç </label>
                <input type="tel" id="carInput" placeholder="æ•°å­—éƒ¨åˆ†">
            </div>
        </div>
        
        <button class="full-btn" onclick="deepAnalyze()">å¼€å¯æ·±åº¦èƒ½é‡åˆ†æ</button>
    </div>

    <div id="resultArea" class="result-section">
        <div class="card" style="text-align: center;">
            <div class="score-circle">
                <span class="score-num" id="totalScore">--</span>
                <span style="font-size:10px;">å¥‘åˆåº¦</span>
            </div>
            <div id="summaryText" style="font-size: 14px; line-height: 1.6;"></div>
        </div>

        <div class="card">
            <h3 style="margin:0 0 15px 0; font-size:16px;">ğŸ” ç»´åº¦æ·±åº¦åˆ†æ</h3>
            <div id="dimAnalysis"></div>
        </div>
    </div>
</div>

<script>
    const starMap = {
        "å¤©åŒ»": { p: ["13","31","68","86","49","94","27","72"], t: "ji", d: "è´¢å¯Œ/æ­£ç¼˜", field: "è´¢è¿" },
        "å»¶å¹´": { p: ["19","91","78","87","34","43","26","62"], t: "ji", d: "èƒ½åŠ›/äº‹ä¸š", field: "äº‹ä¸š" },
        "ç”Ÿæ°”": { p: ["14","41","67","76","39","93","28","82"], t: "ji", d: "è´µäºº/ä¹å¤©", field: "è´µäºº" },
        "ä¼ä½": { p: ["11","22","88","99","66","77","33","44"], t: "ji", d: "è“„åŠ¿/ç­‰å¾…", field: "ç¨³å®š" },
        "ç»å‘½": { p: ["12","21","69","96","48","84","37","73"], t: "xiong", d: "åæ¿€/æŠ•èµ„", field: "é£é™©" },
        "äº”é¬¼": { p: ["18","81","79","97","36","63","24","42"], t: "xiong", d: "å˜åŠ¨/è¡€å…‰", field: "å˜æ•°" },
        "å…­ç…": { p: ["16","61","47","74","38","83","29","92"], t: "xiong", d: "åæ¡ƒèŠ±/æŠ‘éƒ", field: "äººé™…" },
        "ç¥¸å®³": { p: ["17","71","89","98","46","64","23","32"], t: "xiong", d: "å£èˆŒ/å°äºº", field: "å¥åº·" }
    };

    function getPairs(num) {
        let pairs = [];
        let raw = num.toString().replace(/[^\d]/g,'');
        for (let i = 0; i < raw.length - 1; i++) {
            if (raw[i] === '0' || raw[i] === '5') continue;
            let next = i + 1;
            while(next < raw.length && (raw[next] === '0' || raw[next] === '5')) next++;
            if (next < raw.length) pairs.push(raw[i] + raw[next]);
        }
        return pairs;
    }

    function deepAnalyze() {
        const birth = document.getElementById('birthInput').value;
        const phone = document.getElementById('phoneInput').value;
        const car = document.getElementById('carInput').value;

        if(!birth || !phone) { alert("ç”Ÿæ—¥å’Œæ‰‹æœºå·æ˜¯æ ¸å¿ƒï¼Œè¯·è¾“å…¥"); return; }

        document.getElementById('resultArea').style.display = 'block';

        // 1. å…ˆå¤©å‘½æ ¼
        let birthPairs = getPairs(birth);
        let birthStars = birthPairs.map(p => getStarInfo(p)).filter(x => x);

        // 2. æ‰‹æœºç£åœº
        let phonePairs = getPairs(phone);
        let phoneStars = phonePairs.map(p => getStarInfo(p)).filter(x => x);

        // 3. è½¦ç‰Œç£åœº
        let carStars = car ? getPairs(car).map(p => getStarInfo(p)).filter(x => x) : [];

        // ç»¼åˆè®¡ç®—è¯„åˆ†
        let score = 80;
        let advice = "";

        // é€»è¾‘ï¼šå¦‚æœç”Ÿæ—¥é‡Œç¼ºè´¢å¯Œ(å¤©åŒ»)ï¼Œæ‰‹æœºé‡Œæœ‰è¡¥ï¼ŒåŠ åˆ†
        const hasBirthWealth = birthStars.some(s => s.name === "å¤©åŒ»");
        const hasPhoneWealth = phoneStars.some(s => s.name === "å¤©åŒ»");
        
        if(!hasBirthWealth && hasPhoneWealth) {
            advice += "ğŸ’¡ å…ˆå¤©è´¢åº“è¾ƒè™šï¼Œå¹¸å¥½æ‰‹æœºå·è¡¥è¶³äº†å¤©åŒ»è´¢å°˜ï¼Œåˆ©äºèšè´¢ã€‚<br>";
            score += 10;
        } else if (hasBirthWealth && hasPhoneWealth) {
            advice += "ğŸ’° å…ˆå¤©å¸¦è´¢ä¸”åå¤©åŠ©è¿ï¼Œè´¢æºå¹¿è¿›ï¼Œä½†éœ€æ³¨æ„å®ˆè´¢ã€‚<br>";
        }

        // è½¦ç‰Œå®‰å…¨æ£€æŸ¥
        const hasCarDanger = carStars.some(s => s.name === "ç»å‘½" || s.name === "äº”é¬¼");
        if(hasCarDanger) {
            advice += "âš ï¸ è½¦ç‰Œä¸­å¸¦æœ‰å†²åŠ¨æˆ–å˜åŠ¨ç£åœºï¼Œè¡Œè½¦éœ€æ ¼å¤–æ³¨æ„å®‰å…¨ï¼Œé˜²å‰è¹­ã€‚<br>";
            score -= 15;
        }

        document.getElementById('totalScore').innerText = score;
        document.getElementById('summaryText').innerHTML = advice || "æ•´ä½“èƒ½é‡ç£åœºå¹³è¡¡ï¼Œå±äºå¹³ç¨³ä¸Šå‡çš„å‘½æ ¼ã€‚";

        // ç»´åº¦è¯¦æƒ…å±•ç¤º
        renderDimensions(birthStars, phoneStars, carStars);
    }

    function getStarInfo(pair) {
        for (let name in starMap) {
            if (starMap[name].p.includes(pair)) return { name, ...starMap[name] };
        }
        return null;
    }

    function renderDimensions(b, p, c) {
        const area = document.getElementById('dimAnalysis');
        area.innerHTML = `
            <div class="report-box">
                <strong>å…ˆå¤©å‘½æ ¼ (ç”Ÿæ—¥)</strong><br>
                ${b.length ? b.map(s => `<span class="star-item">${s.name} <small>${s.d}</small></span>`).join('') : 'ç£åœºè¾ƒå¼±'}
            </div>
            <div class="report-box" style="border-color: #3b82f6;">
                <strong>åå¤©è¿åŠ¿ (æ‰‹æœº)</strong><br>
                ${p.length ? p.map(s => `<span class="star-item">${s.name} <small>${s.d}</small></span>`).join('') : 'ç£åœºè¾ƒå¼±'}
            </div>
            ${c.length ? `<div class="report-box" style="border-color: #10b981;"><strong>è½½ä½“èƒ½é‡ (è½¦ç‰Œ)</strong><br>${c.map(s => `<span class="star-item">${s.name} <small>${s.d}</small></span>`).join('')}</div>` : ''}
        `;
    }
</script>

</body>
</html>
