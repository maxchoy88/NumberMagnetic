<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ•°ç£ç©ºé—´ Pro | æ·±åº¦èƒ½é‡åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --gold: #f59e0b;
            --gold-light: #fbbf24;
            --dark-bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --ji: #10b981;
            --xiong: #ef4444;
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: -apple-system, "SF Pro Text", "Helvetica Neue", sans-serif;
            background: radial-gradient(circle at top right, #1e1b4b, #0f172a);
            margin: 0;
            padding: 20px;
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        .container { max-width: 500px; margin: 0 auto; padding-bottom: 40px; }

        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { 
            margin: 0; 
            font-size: 28px; 
            background: linear-gradient(to right, #fde68a, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }
        .header p { color: var(--text-secondary); font-size: 14px; margin-top: 5px; }

        .card {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .input-group { margin-bottom: 15px; }
        .label {
            display: flex;
            align-items: center;
            font-size: 13px;
            color: var(--gold-light);
            margin-bottom: 6px;
            font-weight: 600;
        }

        input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            outline: none;
        }

        .analyze-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: #000;
            border: none;
            border-radius: 14px;
            font-weight: 800;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 8px 15px rgba(245, 158, 11, 0.3);
        }

        #resultArea { display: none; animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .score-circle {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            border: 6px solid var(--gold);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 10px auto 20px;
            background: rgba(245, 158, 11, 0.05);
        }
        .score-num { font-size: 40px; font-weight: 900; color: var(--gold); }

        .section-title {
            font-size: 16px;
            color: var(--gold);
            margin: 20px 0 10px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 5px;
        }

        .advice-item {
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 10px;
            font-size: 14px;
            border-left: 3px solid var(--gold-light);
        }
        .advice-item b { color: var(--gold-light); }

        .star-tag {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 11px;
            margin: 2px;
            background: rgba(255,255,255,0.1);
        }
        .tag-ji { color: var(--ji); border: 1px solid var(--ji); }
        .tag-xiong { color: var(--xiong); border: 1px solid var(--xiong); }

        .special-tip {
            background: linear-gradient(45deg, rgba(245,158,11,0.1), rgba(16,185,129,0.1));
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
            border: 1px dashed var(--gold);
        }

        #toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(239, 68, 68, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body>

<div id="toast"></div>

<div class="container">
    <div class="header">
        <h1>âœ¨ æ•°ç£ç©ºé—´ Pro</h1>
        <p>Hi é˜¿ç›› (Castor)ï¼Œå¼€å¯æ‚¨çš„ä¸“å±èƒ½é‡ç½—ç›˜</p>
    </div>

    <div class="card">
        <div class="input-group">
            <label class="label">ğŸ“… å…ˆå¤©å‘½æ ¼ (å‡ºç”Ÿæ—¥æœŸ)</label>
            <input type="tel" id="birthInput" placeholder="19900520" maxlength="8">
        </div>
        <div class="input-group">
            <label class="label">ğŸ“± åå¤©ç£åœº (æ‰‹æœºå·ç )</label>
            <input type="tel" id="phoneInput" placeholder="11ä½å¸¸ç”¨æ‰‹æœºå·" maxlength="11">
        </div>
        <div class="input-group">
            <label class="label">ğŸš— è½½ä½“èƒ½é‡ (è½¦ç‰Œå·ç )</label>
            <input type="text" id="carInput" placeholder="ä»…è¾“å…¥æ•°å­—éƒ¨åˆ†">
        </div>
        <button class="analyze-btn" onclick="runProAnalysis()">æ·±åº¦åˆ†æè¿åŠ¿</button>
    </div>

    <div id="resultArea">
        <div class="card" style="text-align: center;">
            <div class="score-circle">
                <span class="score-num" id="totalScore">0</span>
                <span style="font-size:12px; color:var(--text-secondary)">å¥‘åˆæŒ‡æ•°</span>
            </div>
            <p id="mainSummary" style="font-size:15px; font-weight: 500;"></p>
        </div>

        <div class="card">
            <div class="section-title">ğŸ“Š èƒ½é‡ç»´åº¦åˆ†å¸ƒ</div>
            <div style="height: 250px;">
                <canvas id="proChart"></canvas>
            </div>
        </div>

        <div class="card">
            <div class="section-title">ğŸ” ç»„åˆæ·±åº¦è§£æ</div>
            <div id="combinationAdvice"></div>
        </div>

        <div class="card">
            <div class="section-title">ğŸ’¡ ä¸“å±ç”Ÿæ´»å»ºè®®</div>
            <div id="lifeAdvice"></div>
            
            <!-- ç‰¹åˆ«å½©è›‹ï¼šè´¢å¯Œå®ˆæŠ¤ -->
            <div class="special-tip">
                <div style="font-size: 20px; margin-bottom: 5px;">ğŸ¾</div>
                <div style="font-size: 13px; color: var(--gold-light); font-weight: bold;">è´¢å¯Œå®ˆæŠ¤è€…ï¼šMONEY</div>
                <p style="font-size: 12px; margin: 5px 0 0; color: var(--text-secondary);">
                    Castor, æ‚¨çš„çˆ±å® â€œMONEYâ€å¸¦æœ‰å¤©ç„¶çš„æ²»æ„ˆä¸æ‹›è´¢ç£åœºã€‚<br>
                    æ¯å½“æ„Ÿåˆ°ç£åœºæ··ä¹±æ—¶ï¼Œä¸å®ƒç›¸å¤„15åˆ†é’Ÿå¯å¿«é€Ÿæ ¡å‡†ä¸ªäººèƒ½é‡ä½ã€‚
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    const starMap = {
        "å¤©åŒ»": { p: ["13","31","68","86","49","94","27","72"], field: "è´¢è¿", type: "ji", desc: "ä¸»å¤§è´¢ã€èªæ˜ã€å©šå§»ã€‚" },
        "å»¶å¹´": { p: ["19","91","78","87","34","43","26","62"], field: "äº‹ä¸š", type: "ji", desc: "ä¸»é¢†å¯¼åŠ›ã€èƒ½åŠ›ã€å‹åŠ›ã€‚" },
        "ç”Ÿæ°”": { p: ["14","41","67","76","39","93","28","82"], field: "è´µäºº", type: "ji", desc: "ä¸»è´µäººç›¸åŠ©ã€ä¹å¤©ã€å¥½åå£°ã€‚" },
        "ä¼ä½": { p: ["11","22","88","99","66","77","33","44"], field: "ç¨³å®š", type: "ji", desc: "ä¸»ç­‰å¾…ã€è“„åŠ¿ã€è¢«åŠ¨ã€‚" },
        "ç»å‘½": { p: ["12","21","69","96","48","84","37","73"], field: "å†³æ–­", type: "xiong", desc: "ä¸»æç«¯ã€æŠ•èµ„ã€å¥½èƒœå¿ƒã€‚" },
        "äº”é¬¼": { p: ["18","81","79","97","36","63","24","42"], field: "å˜å¹»", type: "xiong", desc: "ä¸»æ‰åã€å˜åŠ¨ã€è¡€å…‰ã€‚" },
        "å…­ç…": { p: ["16","61","47","74","38","83","29","92"], field: "äººé™…", type: "xiong", desc: "ä¸»æ¡ƒèŠ±ã€çº ç»“ã€æŠ‘éƒã€‚" },
        "ç¥¸å®³": { p: ["17","71","89","98","46","64","23","32"], field: "å£æ‰", type: "xiong", desc: "ä¸»å£èˆŒã€ç—…ç—›ã€å°äººã€‚" }
    };

    let proChart = null;

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg; t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 3000);
    }

    function getPairs(str) {
        const cleaned = str.replace(/[^\d]/g, '');
        const pairs = [];
        for (let i = 0; i < cleaned.length - 1; i++) {
            let pair = cleaned[i] + cleaned[i+1];
            if (cleaned[i] === '0' || cleaned[i] === '5' || cleaned[i+1] === '0' || cleaned[i+1] === '5') continue;
            pairs.push(pair);
        }
        return pairs;
    }

    function getStar(pair) {
        for (let key in starMap) {
            if (starMap[key].p.includes(pair)) return { name: key, ...starMap[key] };
        }
        return null;
    }

    function runProAnalysis() {
        const birth = document.getElementById('birthInput').value;
        const phone = document.getElementById('phoneInput').value;
        const car = document.getElementById('carInput').value;

        if (birth.length < 8 || phone.length < 11) return showToast("è¯·å®Œæ•´å¡«å†™ç”Ÿæ—¥å’Œæ‰‹æœºå·");

        const bStars = getPairs(birth).map(getStar).filter(Boolean);
        const pStars = getPairs(phone).map(getStar).filter(Boolean);
        const cStars = getPairs(car).map(getStar).filter(Boolean);

        document.getElementById('resultArea').style.display = 'block';

        // 1. æ·±åº¦è¯„åˆ†é€»è¾‘
        let score = 80;
        let combinations = [];
        let advices = [];

        // æ‰‹æœºå°¾å·æ·±åº¦åˆ†æ (åå››ä½æœ€é‡è¦)
        const tailNum = phone.slice(-4);
        const tailPairs = getPairs(tailNum).map(getStar).filter(Boolean);
        
        if (tailPairs.length > 0) {
            const lastStar = tailPairs[tailPairs.length - 1];
            if (lastStar.type === 'xiong') {
                score -= 15;
                advices.push(`ğŸš© <b>å°¾å·è­¦ç¤ºï¼š</b>æ‰‹æœºæœ«å°¾å‡ºç°ã€${lastStar.name}ã€‘ï¼Œä»£è¡¨è¿åŠ¿æ”¶å°¾å¤„æœ‰${lastStar.field}æ–¹é¢çš„æ³¢æŠ˜ï¼Œå»ºè®®å‡¡äº‹å¤šç•™é€€è·¯ã€‚`);
            } else {
                score += 10;
                advices.push(`âœ… <b>å‰ç¥¥æ”¶å°¾ï¼š</b>æ‰‹æœºæœ«å°¾ä»¥ã€${lastStar.name}ã€‘ç£åœºå°å£ï¼Œåˆ©äº${lastStar.field}çš„æ²‰æ·€ä¸å®ˆæˆã€‚`);
            }
        }

        // ç£åœºç»„åˆè§£æ
        const combined = [...pStars];
        for (let i = 0; i < combined.length - 1; i++) {
            const s1 = combined[i].name;
            const s2 = combined[i+1].name;
            
            if (s1 === "å¤©åŒ»" && s2 === "å»¶å¹´") {
                combinations.push("ğŸ’° <b>å¤©åŒ»+å»¶å¹´ï¼š</b>æä½³çš„ç†è´¢ç»„åˆï¼Œä¸ä»…ä¼šèµšé’±ï¼Œæ›´èƒ½å®ˆä½è´¢ï¼Œå±äºè€æ¿æ ¼å±€ã€‚");
                score += 5;
            }
            if (s1 === "ç”Ÿæ°”" && s2 === "å¤©åŒ»") {
                combinations.push("ğŸ¤ <b>ç”Ÿæ°”+å¤©åŒ»ï¼š</b>è´µäººé€è´¢ã€‚é€šè¿‡äººè„‰æˆ–æœ‹å‹å¼•èè·å¾—è´¢å¯Œï¼Œäº‹ä¸šé¡ºé‚ã€‚");
                score += 5;
            }
            if (s1 === "ç»å‘½" && s2 === "å¤©åŒ»") {
                combinations.push("âš¡ <b>ç»å‘½+å¤©åŒ»ï¼š</b>é€‚åˆé£é™©æŠ•èµ„æˆ–æŠ€æœ¯è½¬è´¢ï¼Œä½†éœ€é˜²èŒƒå¤§èµ·å¤§è½ã€‚");
            }
        }

        // å…ˆå¤©åå¤©è¡¥ä½åˆ†æ
        const bHasWealth = bStars.some(s => s.name === "å¤©åŒ»");
        const pHasWealth = pStars.some(s => s.name === "å¤©åŒ»");
        if (!bHasWealth && pHasWealth) {
            advices.push("ğŸ’¡ <b>å…ˆå¤©è¡¥ç»™ï¼š</b>æ‚¨çš„å‘½æ ¼ä¸­è´¢å¯Œç£åœºè¾ƒå¼±ï¼Œä½†æ‰‹æœºå·æˆåŠŸå¼•å…¥äº†å¤©åŒ»ç£åœºï¼Œèµ·åˆ°äº†å¾ˆå¥½çš„è½¬è¿ä½œç”¨ã€‚");
            score += 10;
        }

        // åˆ†æ•°åŠ¨ç”»
        const scoreEl = document.getElementById('totalScore');
        const finalScore = Math.min(99, Math.max(30, score));
        let count = 0;
        const itv = setInterval(() => {
            if (count >= finalScore) { scoreEl.innerText = finalScore; clearInterval(itv); }
            else { scoreEl.innerText = ++count; }
        }, 15);

        // æ¸²æŸ“UI
        document.getElementById('mainSummary').innerHTML = finalScore > 85 ? "ç£åœºæåº¦å’Œè°ï¼Œåå¤©åŠ©è¿æ˜æ˜¾" : "ç£åœºåˆ†å¸ƒè¾ƒä¸ºåˆ†æ•£ï¼Œå»ºè®®ä¼˜åŒ–ç»†èŠ‚";
        
        const combDiv = document.getElementById('combinationAdvice');
        combDiv.innerHTML = combinations.length > 0 ? combinations.map(c => `<div class="advice-item">${c}</div>`).join('') : '<div class="advice-item">æš‚æ— æ˜¾è‘—ç£åœºç»„åˆï¼Œå»ºè®®å…³æ³¨åŸºç¡€ç£åœºå¼ºåº¦ã€‚</div>';

        const lifeDiv = document.getElementById('lifeAdvice');
        lifeDiv.innerHTML = advices.map(a => `<div class="advice-item">${a}</div>`).join('') + `
            <div class="advice-item">ğŸ“ˆ <b>äº‹ä¸šå»ºè®®ï¼š</b>è¿‘æœŸé€‚åˆåˆ©ç”¨ã€${pStars[0]?.name || 'ä¼ä½'}ã€‘çš„åŠ›é‡ï¼Œåœ¨ç¨³å®šçš„åŸºç¡€ä¸Šå¯»æ±‚çªç ´ã€‚</div>
            <div class="advice-item">ğŸ <b>å¥åº·å»ºè®®ï¼š</b>${pStars.some(s => s.name === "ç¥¸å®³") ? "æ³¨æ„å‘¼å¸ç³»ç»ŸåŠå…ç–«åŠ›æå‡ã€‚" : "èƒ½é‡å……æ²›ï¼Œä¿æŒè§„å¾‹ä½œæ¯å³å¯ã€‚"}</div>
        `;

        renderProChart(pStars);
        window.scrollTo({ top: document.getElementById('resultArea').offsetTop, behavior: 'smooth' });
    }

    function renderProChart(stars) {
        const dataMap = { "è´¢è¿": 50, "äº‹ä¸š": 50, "è´µäºº": 50, "ç¨³å®š": 50, "äººé™…": 50, "å†³æ–­": 50 };
        stars.forEach(s => {
            if (s.type === 'ji') dataMap[s.field] += 15;
            else dataMap[s.field] -= 10;
        });

        const ctx = document.getElementById('proChart').getContext('2d');
        if (proChart) proChart.destroy();
        proChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: Object.keys(dataMap),
                datasets: [{
                    label: 'å½“å‰ç£åœºå¼ºåº¦',
                    data: Object.values(dataMap),
                    backgroundColor: 'rgba(245, 158, 11, 0.2)',
                    borderColor: '#f59e0b',
                    pointBackgroundColor: '#fff',
                    borderWidth: 2
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: 'rgba(255,255,255,0.05)' },
                        angleLines: { color: 'rgba(255,255,255,0.1)' },
                        pointLabels: { color: '#94a3b8' },
                        ticks: { display: false }
                    }
                },
                plugins: { legend: { display: false } },
                maintainAspectRatio: false
            }
        });
    }
</script>

</body>
</html>
